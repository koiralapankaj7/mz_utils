name: Stale Issues and PRs

on:
  schedule:
    - cron: '0 0 * * *'  # Run daily at midnight
  workflow_dispatch:  # Allow manual trigger

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    name: Mark Stale Issues and PRs
    runs-on: ubuntu-latest
    steps:
      - name: Stale Issues and PRs
        uses: actions/stale@v10
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}

          # Issue configuration
          stale-issue-message: |
            This issue has been automatically marked as stale because it has not had
            recent activity. It will be closed if no further activity occurs within
            the next 7 days. Thank you for your contributions!
          close-issue-message: |
            This issue was automatically closed because it has been stale for 7 days
            with no activity. Please feel free to reopen if needed.
          days-before-issue-stale: 60
          days-before-issue-close: 7
          stale-issue-label: 'stale'
          exempt-issue-labels: 'pinned,security,help-wanted,good-first-issue'

          # PR configuration
          stale-pr-message: |
            This pull request has been automatically marked as stale because it has
            not had recent activity. It will be closed if no further activity occurs
            within the next 14 days. Thank you for your contributions!
          close-pr-message: |
            This pull request was automatically closed because it has been stale for
            14 days with no activity.
          days-before-pr-stale: 30
          days-before-pr-close: 14
          stale-pr-label: 'stale'
          exempt-pr-labels: 'pinned,security'

          # General configuration
          operations-per-run: 30
          remove-stale-when-updated: true
